<section class="aggregation-filters p-3">
    
    <h2 class="heading heading--xs"
        appInfoTooltip="{{'Tour.Tooltip.Filters.Self.text' | translate }}"
        tooltipTitle="{{ 'Tour.Tooltip.Filters.Self.title' | translate }}">
        {{'Filters.Self'| translate}} 
    </h2>

    <!-- Categories -->
    <app-expandable-multiselect id="institution-item-category-filter"
        [titleTranslationKey]="'Attribute.CategoryLong'"
        [titleTooltipTranslationKey]="'Attribute.CategoryTooltip'"
        [options]="filtersOptions && filtersOptions[categoriesHelper.getOptionName()]"
        [selectedIds]="selectedData[categoriesHelper.getFilterName()]"
        [enableApply]="availabilityFilterMap[categoriesHelper.getFilterName()]"
        [maxLength]="maxLength"
        [ariaLabel]="'category-filter-label'"
        (selectedChange)="onSelectedChange(categoriesHelper.getFilterName(), $event)"
        (applyFilter)="applyFilter()">
    </app-expandable-multiselect>

    <!-- Format -->
    <app-expandable-multiselect id="institution-item-format-filter"
        [titleTranslationKey]="'Attribute.FormatLong'"
        [titleTooltipTranslationKey]="'Attribute.FormatTooltip'"
        [options]="filtersOptions && filtersOptions[OptionsNames.FORMAT]"
        [selectedIds]="selectedData[FiletersNames.FORMAT]"
        [enableApply]="availabilityFilterMap[FiletersNames.FORMAT]"
        [maxLength]="maxLength"
        [ariaLabel]="'format-filter-label'"
        (selectedChange)="onSelectedChange(FiletersNames.FORMAT, $event)"
        (applyFilter)="applyFilter()">
    </app-expandable-multiselect>

    <!-- Openness score -->
    <app-expandable-multiselect id="institution-item-openness-filter"
        [titleTranslationKey]="'Attribute.OpennessScore'"
        [titleTooltipTranslationKey]="'Attribute.OpennessScore'"
        [showSearchInput]="false"
        [displayShowMore]="false"
        [options]="filtersOptions && filtersOptions[OptionsNames.OPENNESS_SCORE]"
        [selectedIds]="selectedData[FiletersNames.OPENNESS_SCORE]"
        [enableApply]="availabilityFilterMap[FiletersNames.OPENNESS_SCORE]"
        [maxLength]="maxLength"
        [ariaLabel]="'openness-filter-label'"
        (selectedChange)="onSelectedChange(FiletersNames.OPENNESS_SCORE, $event)"
        (applyFilter)="applyFilter()">
    </app-expandable-multiselect>

    <!-- Visualization type -->
    <app-expandable-multiselect id="institution-item-visualization-types-filter"
        [titleTranslationKey]="'Attribute.VisualizationType'"        
        [titleTooltipTranslationKey]="'Attribute.VisualizationType'"
        [showSearchInput]="false"
        [displayShowMore]="false"
        [options]="filtersOptions && filtersOptions[OptionsNames.VISUALIZATION_TYPE]"
        [selectedIds]="selectedData[FiletersNames.VISUALIZATION_TYPE]"
        [enableApply]="availabilityFilterMap[FiletersNames.VISUALIZATION_TYPE]"
        [maxLength]="maxLength"
        [ariaLabel]="'visualization-types-filter-label'"
        (selectedChange)="onSelectedChange(FiletersNames.VISUALIZATION_TYPE, $event)"
        (applyFilter)="applyFilter()">
    </app-expandable-multiselect>

    <!-- Resource type -->
    <app-expandable-multiselect id="institution-item-resource-type-filter"
        [titleTranslationKey]="'Attribute.ResourceType'"
        [titleTooltipTranslationKey]="'Attribute.ResourceType'"
        [showSearchInput]="false"
        [options]="filtersOptions && filtersOptions[OptionsNames.TYPES]"
        [selectedIds]="selectedData[FiletersNames.TYPES]"
        [enableApply]="availabilityFilterMap[FiletersNames.TYPES]"
        [maxLength]="maxLength"
        [ariaLabel]="'types-filter-label'"
        (selectedChange)="onSelectedChange(FiletersNames.TYPES, $event)"
        (applyFilter)="applyFilter()">
    </app-expandable-multiselect>

    <!-- Date range -->
    <app-date-range-picker id="institution-item-dataset-daterange"
        [startDate]="selectedData[FiletersNames.DATE_FROM]"
        [endDate]="selectedData[FiletersNames.DATE_TO]"
        [enableApply]="availabilityFilterMap[FiletersNames.DATE_FROM] ||
            availabilityFilterMap[FiletersNames.DATE_TO]"
        (datesChanged)="onDaterangeChange([
        {name: FiletersNames.DATE_FROM, value: $event.startDate},
        {name: FiletersNames.DATE_TO, value: $event.endDate}
    ])"
        (applyFilterChanged)="applyFilter()">
    </app-date-range-picker>
</section>
